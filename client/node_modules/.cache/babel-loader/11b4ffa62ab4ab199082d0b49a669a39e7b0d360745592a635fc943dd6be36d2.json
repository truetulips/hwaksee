{"ast":null,"code":"import{BrowserRouter as Router,Routes,Route,Navigate,useNavigate}from'react-router-dom';import{useState,useEffect}from'react';import axios from'./api/axios';import styles from'./css/Default.module.css';import Header from'./components/Header';import LoginForm from'./components/LoginForm';import RegisterForm from'./components/RegisterForm';import ErrorBoundary from'./components/ErrorBoundary';import MyPosts from'./pages/MyPosts';import AdminDashboard from'./pages/AdminDashboard';import PostsPage from'./pages/PostsPage';import PostDetailPage from'./pages/PostDetailPage';import About from'./pages/About';import Process from'./pages/Process';import Footer from'./components/Footer';import NotFound from'./NotFound';// ✅ Intro 컴포넌트는 Router 내부에서 선언되어야 함\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Intro(){const navigate=useNavigate();return/*#__PURE__*/_jsxs(\"main\",{className:styles.main,children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.start,children:[/*#__PURE__*/_jsxs(\"button\",{className:styles.mainButton,onClick:()=>navigate('/login'),children:[/*#__PURE__*/_jsx(\"i\",{className:styles.logIn}),\"\\uB85C\\uADF8\\uC778\"]}),/*#__PURE__*/_jsxs(\"button\",{className:styles.mainButton,onClick:()=>navigate('/register'),children:[/*#__PURE__*/_jsx(\"i\",{className:styles.userAdd}),\"\\uD68C\\uC6D0\\uAC00\\uC785\"]})]}),/*#__PURE__*/_jsx(About,{})]});}function AppContent(){const[user,setUser]=useState(null);const navigate=useNavigate();// ✅ 로그인 상태 확인\nuseEffect(()=>{const token=localStorage.getItem('token');if(!token)return;axios.get('/auth/me',{headers:{Authorization:\"Bearer \".concat(token)}}).then(res=>setUser(res.data)).catch(()=>{localStorage.removeItem('token');setUser(null);});},[]);// ✅ 로그인 성공 시\nconst handleLogin=userData=>{setUser(userData);navigate('/');};// ✅ 로그아웃\nconst handleLogout=()=>{localStorage.removeItem('token');setUser(null);navigate('/');};// ✅ 계정 삭제\nconst handleDeleteAccount=async()=>{try{await axios.delete('/auth/me',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});localStorage.removeItem('token');setUser(null);navigate('/');}catch(err){console.error('계정 삭제 실패:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.layoutwrapper,children:[/*#__PURE__*/_jsxs(ErrorBoundary,{children:[/*#__PURE__*/_jsx(Header,{user:user,onLogout:handleLogout,onDeleteAccount:handleDeleteAccount}),/*#__PURE__*/_jsx(\"main\",{className:styles.mainContent,children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?/*#__PURE__*/_jsx(MyPosts,{user:user}):/*#__PURE__*/_jsx(Intro,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(LoginForm,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(RegisterForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/posts\",element:/*#__PURE__*/_jsx(PostsPage,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/posts/:id\",element:/*#__PURE__*/_jsx(PostDetailPage,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/about\",element:/*#__PURE__*/_jsx(About,{})}),/*#__PURE__*/_jsx(Route,{path:\"/process\",element:/*#__PURE__*/_jsx(Process,{})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:(user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='manager'?/*#__PURE__*/_jsx(AdminDashboard,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/posts/:id\",element:(user===null||user===void 0?void 0:user.role)==='admin'||(user===null||user===void 0?void 0:user.role)==='manager'?/*#__PURE__*/_jsx(PostDetailPage,{user:user}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(NotFound,{})})]})})]}),/*#__PURE__*/_jsx(Footer,{})]});}export default function App(){return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsx(AppContent,{})});}","map":{"version":3,"names":["BrowserRouter","Router","Routes","Route","Navigate","useNavigate","useState","useEffect","axios","styles","Header","LoginForm","RegisterForm","ErrorBoundary","MyPosts","AdminDashboard","PostsPage","PostDetailPage","About","Process","Footer","NotFound","jsx","_jsx","jsxs","_jsxs","Intro","navigate","className","main","children","start","mainButton","onClick","logIn","userAdd","AppContent","user","setUser","token","localStorage","getItem","get","headers","Authorization","concat","then","res","data","catch","removeItem","handleLogin","userData","handleLogout","handleDeleteAccount","delete","err","console","error","layoutwrapper","onLogout","onDeleteAccount","mainContent","path","element","onLogin","role","to","App"],"sources":["D:/creative/react/hwaksee/client/src/App.js"],"sourcesContent":["import { BrowserRouter as Router, Routes, Route, Navigate, useNavigate } from 'react-router-dom';\r\nimport { useState, useEffect } from 'react';\r\nimport axios from './api/axios';\r\nimport styles from './css/Default.module.css';\r\n\r\nimport Header from './components/Header';\r\nimport LoginForm from './components/LoginForm';\r\nimport RegisterForm from './components/RegisterForm';\r\nimport ErrorBoundary from './components/ErrorBoundary';\r\nimport MyPosts from './pages/MyPosts';\r\nimport AdminDashboard from './pages/AdminDashboard';\r\nimport PostsPage from './pages/PostsPage';\r\nimport PostDetailPage from './pages/PostDetailPage';\r\nimport About from './pages/About';\r\nimport Process from './pages/Process';\r\nimport Footer from './components/Footer';\r\nimport NotFound from './NotFound';\r\n\r\n// ✅ Intro 컴포넌트는 Router 내부에서 선언되어야 함\r\nfunction Intro() {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <main className={styles.main}>      \r\n      <div className={styles.start}>\r\n        <button className={styles.mainButton} onClick={() => navigate('/login')}><i className={styles.logIn}></i>로그인</button>\r\n        <button className={styles.mainButton} onClick={() => navigate('/register')}><i className={styles.userAdd}></i>회원가입</button>\r\n      </div>\r\n      <About />\r\n    </main>\r\n  );\r\n}\r\n\r\nfunction AppContent() {\r\n  const [user, setUser] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  // ✅ 로그인 상태 확인\r\n  useEffect(() => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) return;\r\n\r\n    axios.get('/auth/me', {\r\n      headers: { Authorization: `Bearer ${token}` }\r\n    })\r\n    .then(res => setUser(res.data))\r\n    .catch(() => {\r\n      localStorage.removeItem('token');\r\n      setUser(null);\r\n    });\r\n  }, []);\r\n\r\n  // ✅ 로그인 성공 시\r\n  const handleLogin = userData => {\r\n    setUser(userData);\r\n    navigate('/');\r\n  };\r\n\r\n  // ✅ 로그아웃\r\n  const handleLogout = () => {\r\n    localStorage.removeItem('token');\r\n    setUser(null);\r\n    navigate('/');\r\n  };\r\n\r\n  // ✅ 계정 삭제\r\n  const handleDeleteAccount = async () => {\r\n    try {\r\n      await axios.delete('/auth/me', {\r\n        headers: { Authorization: `Bearer ${localStorage.getItem('token')}` }\r\n      });\r\n      localStorage.removeItem('token');\r\n      setUser(null);\r\n      navigate('/');\r\n    } catch (err) {\r\n      console.error('계정 삭제 실패:', err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={styles.layoutwrapper}>\r\n      <ErrorBoundary>\r\n        <Header\r\n          user={user}\r\n          onLogout={handleLogout}\r\n          onDeleteAccount={handleDeleteAccount}\r\n        />\r\n        <main className={styles.mainContent}>\r\n        <Routes>\r\n          <Route path=\"/\" element={user ? <MyPosts user={user} /> : <Intro />} />\r\n          <Route path=\"/login\" element={<LoginForm onLogin={handleLogin} />} />\r\n          <Route path=\"/register\" element={<RegisterForm />} />\r\n          <Route path=\"/posts\" element={<PostsPage user={user} />} />\r\n          <Route path=\"/posts/:id\" element={<PostDetailPage user={user} />} />\r\n          <Route path=\"/about\" element={<About />} />\r\n          <Route path=\"/process\" element={<Process />} />\r\n          <Route path=\"/admin\" element={\r\n            user?.role === 'admin' || user?.role === 'manager'\r\n              ? <AdminDashboard user={user} />\r\n              : <Navigate to=\"/\" />\r\n          } />\r\n          <Route path=\"/admin/posts/:id\" element={\r\n            user?.role === 'admin' || user?.role === 'manager'\r\n              ? <PostDetailPage user={user} />\r\n              : <Navigate to=\"/\" />\r\n          } />\r\n          <Route path=\"*\" element={<NotFound />} />\r\n        </Routes>\r\n        </main>\r\n      </ErrorBoundary>\r\n      <Footer />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default function App() {\r\n  return (\r\n    <Router>\r\n      <AppContent />\r\n    </Router>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}