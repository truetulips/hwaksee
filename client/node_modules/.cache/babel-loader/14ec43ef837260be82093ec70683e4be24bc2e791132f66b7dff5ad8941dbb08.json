{"ast":null,"code":"import _objectSpread from\"D:/creative/react/hwaksee/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'../api/axios';import styles from'../css/AuthForm.module.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function RegisterForm(){const navigate=useNavigate();const[form,setForm]=useState({phone:'',password:'',confirmPassword:''});const[phoneExists,setPhoneExists]=useState(false);const[passwordValid,setPasswordValid]=useState(false);const[passwordsMatch,setPasswordsMatch]=useState(true);const[loading,setLoading]=useState(false);const formatPhone=value=>{const onlyNums=value.replace(/\\D/g,'').slice(0,11);if(onlyNums.length<4)return onlyNums;if(onlyNums.length<8)return\"\".concat(onlyNums.slice(0,3),\"-\").concat(onlyNums.slice(3));return\"\".concat(onlyNums.slice(0,3),\"-\").concat(onlyNums.slice(3,7),\"-\").concat(onlyNums.slice(7));};const handleChange=e=>{const{name,value}=e.target;const updated=name==='phone'?formatPhone(value):value;setForm(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:updated}));};useEffect(()=>{const rawPhone=form.phone.replace(/\\D/g,'');if(rawPhone.length!==11)return;axios.get(\"/auth/check-phone?phone=\".concat(rawPhone)).then(res=>setPhoneExists(res.data.exists)).catch(()=>console.error('전화번호 중복 확인 실패'));},[form.phone]);useEffect(()=>{const regex=/^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/;setPasswordValid(regex.test(form.password));setPasswordsMatch(form.password===form.confirmPassword);},[form.password,form.confirmPassword]);const handleSubmit=async e=>{e.preventDefault();const rawPhone=form.phone.replace(/\\D/g,'');if(!passwordValid||!passwordsMatch||phoneExists||rawPhone.length!==11){alert('입력값을 다시 확인해주세요.');return;}setLoading(true);try{await axios.post('/auth/register',{phone:rawPhone,password:form.password});alert('회원가입이 완료되었습니다!');navigate('/login');}catch(err){var _err$response,_err$response$data;alert('회원가입 실패: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'서버 오류'));}finally{setLoading(false);}};return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit,className:styles.form,children:/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"}),/*#__PURE__*/_jsxs(\"div\",{className:styles.regFormbox,children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\uC804\\uD654\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phone\",type:\"tel\",value:form.phone,onChange:handleChange,required:true,placeholder:\"010-1234-5678\",className:phoneExists?styles.invalid:''}),phoneExists&&/*#__PURE__*/_jsx(\"p\",{className:styles.warn,children:\"\\uC774\\uBBF8 \\uB4F1\\uB85D\\uB41C \\uBC88\\uD638\\uC785\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"label\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",value:form.password,onChange:handleChange,required:true,placeholder:\"\\uC601\\uBB38+\\uC22B\\uC790 6\\uC790 \\uC774\\uC0C1\",className:form.password?passwordValid?styles.valid:styles.invalid:''}),/*#__PURE__*/_jsx(\"label\",{children:\"\\uBE44\\uBC00\\uBC88\\uD638 \\uD655\\uC778\"}),/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",type:\"password\",value:form.confirmPassword,onChange:handleChange,required:true,className:form.confirmPassword?passwordsMatch?styles.valid:styles.invalid:''}),!passwordsMatch&&/*#__PURE__*/_jsx(\"p\",{className:styles.warn,children:\"\\uBE44\\uBC00\\uBC88\\uD638\\uAC00 \\uC77C\\uCE58\\uD558\\uC9C0 \\uC54A\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'가입 중...':'회원가입'})]})]})});}","map":{"version":3,"names":["useState","useEffect","useNavigate","axios","styles","jsx","_jsx","jsxs","_jsxs","RegisterForm","navigate","form","setForm","phone","password","confirmPassword","phoneExists","setPhoneExists","passwordValid","setPasswordValid","passwordsMatch","setPasswordsMatch","loading","setLoading","formatPhone","value","onlyNums","replace","slice","length","concat","handleChange","e","name","target","updated","prev","_objectSpread","rawPhone","get","then","res","data","exists","catch","console","error","regex","test","handleSubmit","preventDefault","alert","post","err","_err$response","_err$response$data","response","message","onSubmit","className","children","regFormbox","type","onChange","required","placeholder","invalid","warn","valid","disabled"],"sources":["D:/creative/react/hwaksee/client/src/components/RegisterForm.jsx"],"sourcesContent":["import { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from '../api/axios';\r\nimport styles from '../css/AuthForm.module.css';\r\n\r\nexport default function RegisterForm() {\r\n  const navigate = useNavigate();\r\n  const [form, setForm] = useState({\r\n    phone: '',\r\n    password: '',\r\n    confirmPassword: ''\r\n  });\r\n\r\n  const [phoneExists, setPhoneExists] = useState(false);\r\n  const [passwordValid, setPasswordValid] = useState(false);\r\n  const [passwordsMatch, setPasswordsMatch] = useState(true);\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const formatPhone = value => {\r\n    const onlyNums = value.replace(/\\D/g, '').slice(0, 11);\r\n    if (onlyNums.length < 4) return onlyNums;\r\n    if (onlyNums.length < 8) return `${onlyNums.slice(0, 3)}-${onlyNums.slice(3)}`;\r\n    return `${onlyNums.slice(0, 3)}-${onlyNums.slice(3, 7)}-${onlyNums.slice(7)}`;\r\n  };\r\n\r\n  const handleChange = e => {\r\n    const { name, value } = e.target;\r\n    const updated = name === 'phone' ? formatPhone(value) : value;\r\n    setForm(prev => ({ ...prev, [name]: updated }));\r\n  };\r\n\r\n  useEffect(() => {\r\n    const rawPhone = form.phone.replace(/\\D/g, '');\r\n    if (rawPhone.length !== 11) return;\r\n\r\n    axios.get(`/auth/check-phone?phone=${rawPhone}`)\r\n      .then(res => setPhoneExists(res.data.exists))\r\n      .catch(() => console.error('전화번호 중복 확인 실패'));\r\n  }, [form.phone]);\r\n\r\n  useEffect(() => {\r\n    const regex = /^(?=.*[A-Za-z])(?=.*\\d)[A-Za-z\\d]{6,}$/;\r\n    setPasswordValid(regex.test(form.password));\r\n    setPasswordsMatch(form.password === form.confirmPassword);\r\n  }, [form.password, form.confirmPassword]);\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const rawPhone = form.phone.replace(/\\D/g, '');\r\n\r\n    if (!passwordValid || !passwordsMatch || phoneExists || rawPhone.length !== 11) {\r\n      alert('입력값을 다시 확인해주세요.');\r\n      return;\r\n    }\r\n\r\n    setLoading(true);\r\n    try {\r\n      await axios.post('/auth/register', {\r\n        phone: rawPhone,\r\n        password: form.password\r\n      });\r\n      alert('회원가입이 완료되었습니다!');\r\n      navigate('/login');\r\n    } catch (err) {\r\n      alert('회원가입 실패: ' + (err.response?.data?.message || '서버 오류'));\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className={styles.form}>\r\n      <section>\r\n        <h2>회원가입</h2>\r\n\r\n        <div className={styles.regFormbox}> \r\n          <label>전화번호</label>\r\n          <input\r\n            name=\"phone\"\r\n            type=\"tel\"\r\n            value={form.phone}\r\n            onChange={handleChange}\r\n            required\r\n            placeholder=\"010-1234-5678\"\r\n            className={phoneExists ? styles.invalid : ''}\r\n          />\r\n          {phoneExists && <p className={styles.warn}>이미 등록된 번호입니다.</p>}\r\n\r\n          <label>비밀번호</label>\r\n          <input\r\n            name=\"password\"\r\n            type=\"password\"\r\n            value={form.password}\r\n            onChange={handleChange}\r\n            required\r\n            placeholder=\"영문+숫자 6자 이상\"\r\n            className={form.password ? (passwordValid ? styles.valid : styles.invalid) : ''}\r\n          />\r\n\r\n          <label>비밀번호 확인</label>\r\n          <input\r\n            name=\"confirmPassword\"\r\n            type=\"password\"\r\n            value={form.confirmPassword}\r\n            onChange={handleChange}\r\n            required\r\n            className={form.confirmPassword ? (passwordsMatch ? styles.valid : styles.invalid) : ''}\r\n          />\r\n          {!passwordsMatch && <p className={styles.warn}>비밀번호가 일치하지 않습니다.</p>}\r\n\r\n          <button type=\"submit\" disabled={loading}>\r\n            {loading ? '가입 중...' : '회원가입'}\r\n          </button>\r\n        </div>\r\n      </section>\r\n    </form>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}