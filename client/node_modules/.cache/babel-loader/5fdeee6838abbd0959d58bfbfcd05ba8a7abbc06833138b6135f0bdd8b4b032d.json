{"ast":null,"code":"import{useParams,useNavigate}from'react-router-dom';import PostViewer from'../components/PostViewer';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PostDetailPage(_ref){let{user}=_ref;const{id}=useParams();// URL에서 글 ID 추출\nconst navigate=useNavigate();// 사용자 정보가 없거나 잘못된 경우 방어 처리\nif(!user||!user._id||!user.role){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uD83D\\uDEAB \\uC0AC\\uC6A9\\uC790 \\uC815\\uBCF4\\uAC00 \\uD655\\uC778\\uB418\\uC9C0 \\uC54A\\uC558\\uC2B5\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\uB85C\\uADF8\\uC778 \\uD6C4 \\uB2E4\\uC2DC \\uC2DC\\uB3C4\\uD574\\uC8FC\\uC138\\uC694.\"})]});}// 잘못된 ID가 들어왔을 경우 (예: 'admin' 같은 문자열)\nconst isInvalidId=!id||id.length<12||id==='admin';// ObjectId는 최소 12자\nif(isInvalidId){return/*#__PURE__*/_jsxs(\"div\",{style:{padding:'2rem',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u26A0\\uFE0F \\uC798\\uBABB\\uB41C \\uAE00 ID\\uC785\\uB2C8\\uB2E4.\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uAE00\\uC744 \\uCC3E\\uC744 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4. \",/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/'),children:\"\\uD648\\uC73C\\uB85C\"})]})]});}return/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"h2\",{style:{marginBottom:'20px'},children:\"\\uAE00 \\uC0C1\\uC138\\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(PostViewer,{postId:id// 글 ID 전달\n,userRole:user.role// 'user' 또는 'admin'\n,currentUserId:user._id// 로그인한 사용자 ID\n})]});}","map":{"version":3,"names":["useParams","useNavigate","PostViewer","jsx","_jsx","jsxs","_jsxs","PostDetailPage","_ref","user","id","navigate","_id","role","style","padding","textAlign","children","isInvalidId","length","onClick","marginBottom","postId","userRole","currentUserId"],"sources":["D:/creative/react/hwaksee/client/src/pages/PostDetailPage.jsx"],"sourcesContent":["import { useParams, useNavigate } from 'react-router-dom';\r\nimport PostViewer from '../components/PostViewer';\r\n\r\nexport default function PostDetailPage({ user }) {\r\n  const { id } = useParams(); // URL에서 글 ID 추출\r\n  const navigate = useNavigate();\r\n\r\n  // 사용자 정보가 없거나 잘못된 경우 방어 처리\r\n  if (!user || !user._id || !user.role) {\r\n    return (\r\n      <div style={{ padding: '2rem', textAlign: 'center' }}>\r\n        <h2>🚫 사용자 정보가 확인되지 않았습니다.</h2>\r\n        <p>로그인 후 다시 시도해주세요.</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // 잘못된 ID가 들어왔을 경우 (예: 'admin' 같은 문자열)\r\n  const isInvalidId = !id || id.length < 12 || id === 'admin'; // ObjectId는 최소 12자\r\n  if (isInvalidId) {\r\n    return (\r\n      <div style={{ padding: '2rem', textAlign: 'center' }}>\r\n        <h2>⚠️ 잘못된 글 ID입니다.</h2>\r\n        <p>글을 찾을 수 없습니다. <button onClick={() => navigate('/')}>홈으로</button></p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <h2 style={{ marginBottom: '20px' }}>글 상세보기</h2>\r\n      <PostViewer\r\n        postId={id}                // 글 ID 전달\r\n        userRole={user.role}       // 'user' 또는 'admin'\r\n        currentUserId={user._id}   // 로그인한 사용자 ID\r\n      />\r\n    </section>\r\n  );\r\n}\r\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,WAAW,KAAQ,kBAAkB,CACzD,MAAO,CAAAC,UAAU,KAAM,0BAA0B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAElD,cAAe,SAAS,CAAAC,cAAcA,CAAAC,IAAA,CAAW,IAAV,CAAEC,IAAK,CAAC,CAAAD,IAAA,CAC7C,KAAM,CAAEE,EAAG,CAAC,CAAGV,SAAS,CAAC,CAAC,CAAE;AAC5B,KAAM,CAAAW,QAAQ,CAAGV,WAAW,CAAC,CAAC,CAE9B;AACA,GAAI,CAACQ,IAAI,EAAI,CAACA,IAAI,CAACG,GAAG,EAAI,CAACH,IAAI,CAACI,IAAI,CAAE,CACpC,mBACEP,KAAA,QAAKQ,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,eACnDb,IAAA,OAAAa,QAAA,CAAI,6GAAsB,CAAI,CAAC,cAC/Bb,IAAA,MAAAa,QAAA,CAAG,8EAAgB,CAAG,CAAC,EACpB,CAAC,CAEV,CAEA;AACA,KAAM,CAAAC,WAAW,CAAG,CAACR,EAAE,EAAIA,EAAE,CAACS,MAAM,CAAG,EAAE,EAAIT,EAAE,GAAK,OAAO,CAAE;AAC7D,GAAIQ,WAAW,CAAE,CACf,mBACEZ,KAAA,QAAKQ,KAAK,CAAE,CAAEC,OAAO,CAAE,MAAM,CAAEC,SAAS,CAAE,QAAS,CAAE,CAAAC,QAAA,eACnDb,IAAA,OAAAa,QAAA,CAAI,8DAAe,CAAI,CAAC,cACxBX,KAAA,MAAAW,QAAA,EAAG,6DAAc,cAAAb,IAAA,WAAQgB,OAAO,CAAEA,CAAA,GAAMT,QAAQ,CAAC,GAAG,CAAE,CAAAM,QAAA,CAAC,oBAAG,CAAQ,CAAC,EAAG,CAAC,EACpE,CAAC,CAEV,CAEA,mBACEX,KAAA,YAAAW,QAAA,eACEb,IAAA,OAAIU,KAAK,CAAE,CAAEO,YAAY,CAAE,MAAO,CAAE,CAAAJ,QAAA,CAAC,iCAAM,CAAI,CAAC,cAChDb,IAAA,CAACF,UAAU,EACToB,MAAM,CAAEZ,EAAmB;AAAA,CAC3Ba,QAAQ,CAAEd,IAAI,CAACI,IAAY;AAAA,CAC3BW,aAAa,CAAEf,IAAI,CAACG,GAAO;AAAA,CAC5B,CAAC,EACK,CAAC,CAEd","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}