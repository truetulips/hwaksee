{"ast":null,"code":"var _jsxFileName = \"D:\\\\creative\\\\react\\\\hwaksee\\\\client\\\\src\\\\components\\\\PostList.jsx\",\n  _s = $RefreshSig$();\nimport { useNavigate } from 'react-router-dom';\nimport axios from '../api/axios';\nimport styles from '../css/Posts.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function PostList({\n  posts,\n  currentUserId,\n  userRole,\n  onRefresh\n}) {\n  _s();\n  const navigate = useNavigate();\n  const token = localStorage.getItem('token');\n\n  // ‚úÖ Í∏Ä ÏÇ≠Ï†ú\n  const handleDelete = async id => {\n    if (!window.confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;\n    try {\n      await axios.delete(`/posts/${id}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      onRefresh();\n    } catch (err) {\n      alert('ÏÇ≠Ï†ú Ïã§Ìå®');\n    }\n  };\n\n  // ‚úÖ Îß§Ïπ≠ Ï≤òÎ¶¨\n  const handleMatch = async id => {\n    try {\n      await axios.patch(`/posts/${id}`, {\n        matcher: currentUserId\n      }, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      onRefresh();\n    } catch (err) {\n      alert('Îß§Ïπ≠ Ïã§Ìå®');\n    }\n  };\n\n  // ‚úÖ Îπà Î¶¨Ïä§Ìä∏ Ï≤òÎ¶¨\n  if (!posts || posts.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.empty,\n      children: \"\\uD45C\\uC2DC\\uD560 \\uB9E4\\uCE6D\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.grid,\n    children: posts.map(post => {\n      const isAuthor = post.author === currentUserId;\n      const isAdmin = userRole === 'admin';\n      const isMatched = !!post.matcher;\n      const isDeletable = !isMatched && (isAuthor || isAdmin);\n      const canMatch = !isMatched && !isAuthor && userRole === 'user';\n\n      // ‚úÖ ÏÉÅÌÉú ÌÖçÏä§Ìä∏ Î∞è ÏÉâÏÉÅ Í≤∞Ï†ï\n      let statusText = 'Îì±Î°ù Ï§ë';\n      let statusClass = styles.waiting;\n      if (post.status === 'Îß§Ïπ≠') {\n        statusText = 'Í±∞Îûò ÏßÑÌñâ Ï§ë >>';\n        statusClass = styles.active;\n      } else if (post.status === 'ÏôÑÎ£å') {\n        statusText = 'Í±∞Îûò ÏôÑÎ£å';\n        statusClass = styles.done;\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.card,\n        onClick: () => navigate(`/posts/${post._id}`),\n        children: [isDeletable && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.deleteButton,\n          onClick: e => {\n            e.stopPropagation();\n            handleDelete(post._id);\n          },\n          children: \"\\u274C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: styles.postT,\n          children: post.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [post.price.toLocaleString(), \"\\uC6D0\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `${styles.status} ${statusClass}`,\n          children: statusText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), canMatch && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: e => {\n            e.stopPropagation();\n            handleMatch(post._id);\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: styles.matchButton\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 17\n          }, this), \"\\uB9E4\\uCE6D\\uD558\\uAE30\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 15\n        }, this)]\n      }, post._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 62,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 40,\n    columnNumber: 5\n  }, this);\n}\n_s(PostList, \"CzcTeTziyjMsSrAVmHuCCb6+Bfg=\", false, function () {\n  return [useNavigate];\n});\n_c = PostList;\nvar _c;\n$RefreshReg$(_c, \"PostList\");","map":{"version":3,"names":["useNavigate","axios","styles","jsxDEV","_jsxDEV","PostList","posts","currentUserId","userRole","onRefresh","_s","navigate","token","localStorage","getItem","handleDelete","id","window","confirm","delete","headers","Authorization","err","alert","handleMatch","patch","matcher","length","className","empty","children","fileName","_jsxFileName","lineNumber","columnNumber","grid","map","post","isAuthor","author","isAdmin","isMatched","isDeletable","canMatch","statusText","statusClass","waiting","status","active","done","card","onClick","_id","deleteButton","e","stopPropagation","postT","title","price","toLocaleString","matchButton","_c","$RefreshReg$"],"sources":["D:/creative/react/hwaksee/client/src/components/PostList.jsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\r\nimport axios from '../api/axios';\r\nimport styles from '../css/Posts.module.css';\r\n\r\nexport default function PostList({ posts, currentUserId, userRole, onRefresh }) {\r\n  const navigate = useNavigate();\r\n  const token = localStorage.getItem('token');\r\n\r\n  // ‚úÖ Í∏Ä ÏÇ≠Ï†ú\r\n  const handleDelete = async (id) => {\r\n    if (!window.confirm('Ï†ïÎßê ÏÇ≠Ï†úÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) return;\r\n    try {\r\n      await axios.delete(`/posts/${id}`, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      onRefresh();\r\n    } catch (err) {\r\n      alert('ÏÇ≠Ï†ú Ïã§Ìå®');\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Îß§Ïπ≠ Ï≤òÎ¶¨\r\n  const handleMatch = async (id) => {\r\n    try {\r\n      await axios.patch(`/posts/${id}`, { matcher: currentUserId }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      onRefresh();\r\n    } catch (err) {\r\n      alert('Îß§Ïπ≠ Ïã§Ìå®');\r\n    }\r\n  };\r\n\r\n  // ‚úÖ Îπà Î¶¨Ïä§Ìä∏ Ï≤òÎ¶¨\r\n  if (!posts || posts.length === 0) {\r\n    return <p className={styles.empty}>ÌëúÏãúÌï† Îß§Ïπ≠Í∏ÄÏù¥ ÏóÜÏäµÎãàÎã§.</p>;\r\n  }\r\n\r\n  return (\r\n    <div className={styles.grid}>\r\n      {posts.map(post => {\r\n        const isAuthor = post.author === currentUserId;\r\n        const isAdmin = userRole === 'admin';\r\n        const isMatched = !!post.matcher;\r\n\r\n        const isDeletable = !isMatched && (isAuthor || isAdmin);\r\n        const canMatch = !isMatched && !isAuthor && userRole === 'user';\r\n\r\n        // ‚úÖ ÏÉÅÌÉú ÌÖçÏä§Ìä∏ Î∞è ÏÉâÏÉÅ Í≤∞Ï†ï\r\n        let statusText = 'Îì±Î°ù Ï§ë';\r\n        let statusClass = styles.waiting;\r\n\r\n        if (post.status === 'Îß§Ïπ≠') {\r\n          statusText = 'Í±∞Îûò ÏßÑÌñâ Ï§ë >>';\r\n          statusClass = styles.active;\r\n        } else if (post.status === 'ÏôÑÎ£å') {\r\n          statusText = 'Í±∞Îûò ÏôÑÎ£å';\r\n          statusClass = styles.done;\r\n        }\r\n\r\n        return (\r\n          <div\r\n            key={post._id}\r\n            className={styles.card}\r\n            onClick={() => navigate(`/posts/${post._id}`)}\r\n          >\r\n            {/* ‚ùå ÏÇ≠Ï†ú Î≤ÑÌäº */}\r\n            {isDeletable && (\r\n              <button\r\n                className={styles.deleteButton}\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleDelete(post._id);\r\n                }}\r\n              >\r\n                ‚ùå\r\n              </button>\r\n            )}\r\n\r\n            {/* üìÑ Í∏Ä Ï†ïÎ≥¥ */}\r\n            <h3 className={styles.postT}>{post.title}</h3>\r\n            <p>{post.price.toLocaleString()}Ïõê</p>\r\n            <p className={`${styles.status} ${statusClass}`}>{statusText}</p>\r\n\r\n            {/* ü§ù Îß§Ïπ≠ Î≤ÑÌäº */}\r\n            {canMatch && (\r\n              <button\r\n                onClick={(e) => {\r\n                  e.stopPropagation();\r\n                  handleMatch(post._id);\r\n                }}\r\n              >\r\n                <i className={styles.matchButton}></i>Îß§Ïπ≠ÌïòÍ∏∞\r\n              </button>\r\n            )}\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}