{"ast":null,"code":"import{useEffect,useState}from'react';import{useParams,useNavigate}from'react-router-dom';import axios from'../api/axios';import styles from'../css/Posts.module.css';import BuyerActions from'./BuyerActions';import SellerDispatchForm from'./SellerDispatchForm';import AdminActions from'./AdminActions';import MatchButton from'./MatchButton';import TransactionNotice from'./TransactionNotice';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function PostViewer(_ref){var _post$author,_post$matcher,_post$settlementAccou,_post$shipping,_post$shipping2,_post$feeAmount,_post$buyerAmount,_post$sellerAmount;let{userRole,currentUserId}=_ref;const{id}=useParams();const navigate=useNavigate();const[post,setPost]=useState(null);const token=localStorage.getItem('token');// ✅ 글 조회\nuseEffect(()=>{if(!id||id==='admin'){navigate('/admin/posts');// 잘못된 접근 방어\nreturn;}axios.get(\"/posts/\".concat(id)).then(res=>setPost(res.data)).catch(()=>navigate('/posts'));},[id,navigate]);// ✅ 글 업데이트\nconst updatePost=async patchData=>{try{const res=await axios.patch(\"/posts/\".concat(id),patchData,{headers:{Authorization:\"Bearer \".concat(token)}});setPost(res.data);}catch(err){alert('업데이트 실패');}};// ✅ 매칭 처리\nconst handleMatchCode=async()=>{try{const res=await axios.post('/posts/match',{matchCode:post.matchCode},{headers:{Authorization:\"Bearer \".concat(token)}});setPost(res.data.post);alert('매칭이 완료되었습니다!');}catch(err){var _err$response,_err$response$data;alert('매칭 실패: '+(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.message)||'서버 오류'));}};if(!post)return null;// ✅ 권한 및 역할 분기\nconst isAuthor=((_post$author=post.author)===null||_post$author===void 0?void 0:_post$author.toString())===currentUserId;const isMatcher=((_post$matcher=post.matcher)===null||_post$matcher===void 0?void 0:_post$matcher.toString())===currentUserId;const isAdmin=userRole==='admin';const canView=isAuthor||isMatcher||isAdmin;const canMatch=!post.matcher&&!isAuthor&&userRole==='user';const isBuyer=isAuthor&&post.type==='buyer'||isMatcher&&post.matcherRole==='buyer';const isSeller=isAuthor&&post.type==='seller'||isMatcher&&post.matcherRole==='seller';const canCopyMatchCode=post.status==='등록'&&post.matchCode;// ✅ 거래 완료 조건\nconst isFullyCompleted=post.buyerStatus==='완료'&&post.sellerStatus==='완료'&&!!((_post$settlementAccou=post.settlementAccount)!==null&&_post$settlementAccou!==void 0&&_post$settlementAccou.bank);// ✅ 배송 정보 노출 조건\nconst shouldShowShippingInfo=isBuyer&&['출고','완료'].includes(post.buyerStatus)&&((_post$shipping=post.shipping)===null||_post$shipping===void 0?void 0:_post$shipping.courier)&&((_post$shipping2=post.shipping)===null||_post$shipping2===void 0?void 0:_post$shipping2.tracking)&&post.sellerStatus==='발송';if(!canView){return/*#__PURE__*/_jsx(\"div\",{className:styles.main,children:\"\\uD83D\\uDEAB \\uC774 \\uAE00\\uC5D0 \\uC811\\uADFC\\uD560 \\uC218 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"});}// ✅ 상태 텍스트 및 색상 결정\nlet statusText='등록 중';let statusClass=styles.waiting;if(post.status==='매칭'){statusText='거래 진행 중 >>';statusClass=styles.active;}else if(post.status==='완료'){statusText='거래 완료';statusClass=styles.done;}return/*#__PURE__*/_jsx(\"section\",{children:/*#__PURE__*/_jsxs(\"div\",{className:styles.card,children:[/*#__PURE__*/_jsx(\"h3\",{children:post.title}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u25B6 \\uAE08\\uC561: \",post.price.toLocaleString(),\"\\uC6D0\"]}),/*#__PURE__*/_jsx(\"a\",{href:post.link,target:\"_blank\",rel:\"noopener noreferrer\",className:styles.link,children:\"\\uD83D\\uDD17 \\uBB3C\\uD488 \\uD3EC\\uC2A4\\uD305 \\uBCF4\\uAE30\"}),/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(styles.status,\" \").concat(statusClass),children:statusText}),/*#__PURE__*/_jsxs(\"div\",{className:styles.matBox,children:[post.matchCode&&/*#__PURE__*/_jsxs(\"p\",{className:styles.codeBox,children:[\"\\u25B6 \\uB9E4\\uCE6D \\uCF54\\uB4DC: \",/*#__PURE__*/_jsx(\"strong\",{children:post.matchCode})]}),canCopyMatchCode&&/*#__PURE__*/_jsx(\"button\",{className:styles.copyBtn,onClick:()=>{var _navigator,_navigator$clipboard;if((_navigator=navigator)!==null&&_navigator!==void 0&&(_navigator$clipboard=_navigator.clipboard)!==null&&_navigator$clipboard!==void 0&&_navigator$clipboard.writeText){navigator.clipboard.writeText(post.matchCode).then(()=>alert('📋 매칭코드가 복사되었습니다')).catch(()=>alert('❌ 복사에 실패했습니다'));}else{alert('❌ 이 브라우저에서는 복사 기능을 지원하지 않습니다');}},children:\"\\uD83D\\uDCCB \\uCF54\\uB4DC \\uBCF5\\uC0AC\"})]}),/*#__PURE__*/_jsxs(\"pre\",{className:styles.feeNotice,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uC218\\uC218\\uB8CC: \",(_post$feeAmount=post.feeAmount)===null||_post$feeAmount===void 0?void 0:_post$feeAmount.toLocaleString(),\"\\uC6D0\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uAD6C\\uB9E4\\uC790 \\uACB0\\uC81C \\uAE08\\uC561: \",(_post$buyerAmount=post.buyerAmount)===null||_post$buyerAmount===void 0?void 0:_post$buyerAmount.toLocaleString(),\"\\uC6D0\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD310\\uB9E4\\uC790 \\uC815\\uC0B0 \\uAE08\\uC561: \",(_post$sellerAmount=post.sellerAmount)===null||_post$sellerAmount===void 0?void 0:_post$sellerAmount.toLocaleString(),\"\\uC6D0\"]})]}),/*#__PURE__*/_jsx(TransactionNotice,{}),isFullyCompleted&&/*#__PURE__*/_jsx(\"div\",{className:styles.completeBanner,children:\"\\uD83C\\uDF89 \\uAC70\\uB798\\uAC00 \\uC644\\uB8CC\\uB418\\uC5C8\\uC2B5\\uB2C8\\uB2E4.\"}),!isFullyCompleted&&/*#__PURE__*/_jsxs(\"div\",{className:styles.statusBox,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83E\\uDDFE \\uAD6C\\uB9E4\\uC790 \\uC0C1\\uD0DC: \",/*#__PURE__*/_jsx(\"strong\",{children:post.buyerStatus||'진행 전'})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDCE6 \\uD310\\uB9E4\\uC790 \\uC0C1\\uD0DC: \",/*#__PURE__*/_jsx(\"strong\",{children:post.sellerStatus||'진행 전'})]}),shouldShowShippingInfo&&/*#__PURE__*/_jsx(\"div\",{className:styles.notice,children:/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDE9A \\uBC30\\uC1A1 \\uC815\\uBCF4: \",post.shipping.courier,\" / \",post.shipping.tracking]})})]}),!isFullyCompleted&&/*#__PURE__*/_jsxs(\"div\",{className:styles.actions,children:[canMatch&&/*#__PURE__*/_jsx(MatchButton,{onClick:handleMatchCode}),post.matcher&&/*#__PURE__*/_jsxs(_Fragment,{children:[isAdmin&&/*#__PURE__*/_jsx(AdminActions,{post:post,updatePost:updatePost}),(isBuyer||isAdmin)&&/*#__PURE__*/_jsx(BuyerActions,{post:post,updatePost:updatePost}),(isSeller||isAdmin)&&/*#__PURE__*/_jsx(SellerDispatchForm,{post:post,updatePost:updatePost,isAdmin:isAdmin})]})]}),/*#__PURE__*/_jsx(\"div\",{className:styles.buttom_controll,children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate(-1),className:styles.backBtn,children:[/*#__PURE__*/_jsx(\"i\",{className:styles.arrowLeft}),\"\\uB4A4\\uB85C\\uAC00\\uAE30\"]})})]})});}","map":{"version":3,"names":["useEffect","useState","useParams","useNavigate","axios","styles","BuyerActions","SellerDispatchForm","AdminActions","MatchButton","TransactionNotice","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","PostViewer","_ref","_post$author","_post$matcher","_post$settlementAccou","_post$shipping","_post$shipping2","_post$feeAmount","_post$buyerAmount","_post$sellerAmount","userRole","currentUserId","id","navigate","post","setPost","token","localStorage","getItem","get","concat","then","res","data","catch","updatePost","patchData","patch","headers","Authorization","err","alert","handleMatchCode","matchCode","_err$response","_err$response$data","response","message","isAuthor","author","toString","isMatcher","matcher","isAdmin","canView","canMatch","isBuyer","type","matcherRole","isSeller","canCopyMatchCode","status","isFullyCompleted","buyerStatus","sellerStatus","settlementAccount","bank","shouldShowShippingInfo","includes","shipping","courier","tracking","className","main","children","statusText","statusClass","waiting","active","done","card","title","price","toLocaleString","href","link","target","rel","matBox","codeBox","copyBtn","onClick","_navigator","_navigator$clipboard","navigator","clipboard","writeText","feeNotice","feeAmount","buyerAmount","sellerAmount","completeBanner","statusBox","notice","actions","buttom_controll","backBtn","arrowLeft"],"sources":["D:/creative/react/hwaksee/client/src/components/PostViewer.jsx"],"sourcesContent":["import { useEffect, useState } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport axios from '../api/axios';\r\nimport styles from '../css/Posts.module.css';\r\n\r\nimport BuyerActions from './BuyerActions';\r\nimport SellerDispatchForm from './SellerDispatchForm';\r\nimport AdminActions from './AdminActions';\r\nimport MatchButton from './MatchButton';\r\nimport TransactionNotice from './TransactionNotice';\r\n\r\nexport default function PostViewer({ userRole, currentUserId }) {\r\n  const { id } = useParams();\r\n  const navigate = useNavigate();\r\n  const [post, setPost] = useState(null);\r\n  const token = localStorage.getItem('token');\r\n\r\n  // ✅ 글 조회\r\n  useEffect(() => {\r\n    if (!id || id === 'admin') {\r\n      navigate('/admin/posts'); // 잘못된 접근 방어\r\n      return;\r\n    }\r\n\r\n    axios.get(`/posts/${id}`)\r\n      .then(res => setPost(res.data))\r\n      .catch(() => navigate('/posts'));\r\n  }, [id, navigate]);\r\n\r\n  // ✅ 글 업데이트\r\n  const updatePost = async (patchData) => {\r\n    try {\r\n      const res = await axios.patch(`/posts/${id}`, patchData, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setPost(res.data);\r\n    } catch (err) {\r\n      alert('업데이트 실패');\r\n    }\r\n  };\r\n\r\n  // ✅ 매칭 처리\r\n  const handleMatchCode = async () => {\r\n    try {\r\n      const res = await axios.post('/posts/match', { matchCode: post.matchCode }, {\r\n        headers: { Authorization: `Bearer ${token}` }\r\n      });\r\n      setPost(res.data.post);\r\n      alert('매칭이 완료되었습니다!');\r\n    } catch (err) {\r\n      alert('매칭 실패: ' + (err.response?.data?.message || '서버 오류'));\r\n    }\r\n  };\r\n\r\n  if (!post) return null;\r\n\r\n  // ✅ 권한 및 역할 분기\r\n  const isAuthor = post.author?.toString() === currentUserId;\r\n  const isMatcher = post.matcher?.toString() === currentUserId;\r\n  const isAdmin = userRole === 'admin';\r\n  const canView = isAuthor || isMatcher || isAdmin;\r\n  const canMatch = !post.matcher && !isAuthor && userRole === 'user';\r\n\r\n  const isBuyer = (isAuthor && post.type === 'buyer') || (isMatcher && post.matcherRole === 'buyer');\r\n  const isSeller = (isAuthor && post.type === 'seller') || (isMatcher && post.matcherRole === 'seller');\r\n  const canCopyMatchCode = post.status === '등록' && post.matchCode;\r\n\r\n  // ✅ 거래 완료 조건\r\n  const isFullyCompleted =\r\n    post.buyerStatus === '완료' &&\r\n    post.sellerStatus === '완료' &&\r\n    !!post.settlementAccount?.bank;\r\n\r\n  // ✅ 배송 정보 노출 조건\r\n  const shouldShowShippingInfo =\r\n    isBuyer &&\r\n    ['출고', '완료'].includes(post.buyerStatus) &&\r\n    post.shipping?.courier &&\r\n    post.shipping?.tracking &&\r\n    post.sellerStatus === '발송';\r\n\r\n  if (!canView) {\r\n    return <div className={styles.main}>🚫 이 글에 접근할 수 없습니다.</div>;\r\n  }\r\n\r\n  // ✅ 상태 텍스트 및 색상 결정\r\n  let statusText = '등록 중';\r\n  let statusClass = styles.waiting;\r\n\r\n  if (post.status === '매칭') {\r\n    statusText = '거래 진행 중 >>';\r\n    statusClass = styles.active;\r\n  } else if (post.status === '완료') {\r\n    statusText = '거래 완료';\r\n    statusClass = styles.done;\r\n  }\r\n\r\n  return (\r\n    <section>\r\n      <div className={styles.card}>\r\n        {/* 📄 글 정보 */}\r\n        <h3>{post.title}</h3>\r\n        <p>▶ 금액: {post.price.toLocaleString()}원</p>\r\n        <a href={post.link} target=\"_blank\" rel=\"noopener noreferrer\" className={styles.link}>\r\n          🔗 물품 포스팅 보기\r\n        </a>\r\n        <p className={`${styles.status} ${statusClass}`}>{statusText}</p>\r\n\r\n        {/* 🔗 매칭 코드 */}\r\n        <div className={styles.matBox}>          \r\n          {post.matchCode && (\r\n            <p className={styles.codeBox}>\r\n              ▶ 매칭 코드: <strong>{post.matchCode}</strong>\r\n            </p>          \r\n          )}\r\n\r\n          {canCopyMatchCode && (\r\n            <button className={styles.copyBtn} onClick={() => {\r\n                if (navigator?.clipboard?.writeText) {\r\n                  navigator.clipboard.writeText(post.matchCode)\r\n                  .then(() => alert('📋 매칭코드가 복사되었습니다'))\r\n                  .catch(() => alert('❌ 복사에 실패했습니다'));\r\n                } else {\r\n                  alert('❌ 이 브라우저에서는 복사 기능을 지원하지 않습니다');\r\n                }\r\n              }}\r\n            >\r\n              📋 코드 복사\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* 💰 수수료 안내 */}\r\n        <pre className={styles.feeNotice}>\r\n          <p>수수료: {post.feeAmount?.toLocaleString()}원</p>\r\n          <p>구매자 결제 금액: {post.buyerAmount?.toLocaleString()}원</p>\r\n          <p>판매자 정산 금액: {post.sellerAmount?.toLocaleString()}원</p>\r\n          {/* <p>총 거래 금액: {post.totalAmount?.toLocaleString()}원</p> */}\r\n        </pre>\r\n\r\n        <TransactionNotice />\r\n\r\n        {/* ✅ 거래 종료 안내 */}\r\n        {isFullyCompleted && (\r\n          <div className={styles.completeBanner}>\r\n            🎉 거래가 완료되었습니다.\r\n          </div>\r\n        )}\r\n\r\n        {/* 📊 상태 표시 */}\r\n        {!isFullyCompleted && (\r\n          <div className={styles.statusBox}>\r\n            <p>🧾 구매자 상태: <strong>{post.buyerStatus || '진행 전'}</strong></p>\r\n            <p>📦 판매자 상태: <strong>{post.sellerStatus || '진행 전'}</strong></p>\r\n\r\n            {shouldShowShippingInfo && (\r\n              <div className={styles.notice}>\r\n                <p>🚚 배송 정보: {post.shipping.courier} / {post.shipping.tracking}</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* 🎯 액션 영역 */}\r\n        {!isFullyCompleted && (\r\n          <div className={styles.actions}>\r\n            {canMatch && <MatchButton onClick={handleMatchCode} />}\r\n\r\n            {post.matcher && (\r\n              <>\r\n                {isAdmin && (\r\n                  <AdminActions post={post} updatePost={updatePost} />\r\n                )}\r\n\r\n                {(isBuyer || isAdmin) && (\r\n                  <BuyerActions post={post} updatePost={updatePost} />\r\n                )}\r\n\r\n                {(isSeller || isAdmin) && (\r\n                  <SellerDispatchForm post={post} updatePost={updatePost} isAdmin={isAdmin} />\r\n                )}\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n\r\n        {/* ⬅️ 뒤로가기 */}\r\n        <div className={styles.buttom_controll}>\r\n          <button onClick={() => navigate(-1)} className={styles.backBtn}>\r\n            <i className={styles.arrowLeft}></i>뒤로가기\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}