{"ast":null,"code":"import{useState}from'react';import styles from'../css/Posts.module.css';import imageLibrary from'../data/images';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function BuyerActions(_ref){let{post,updatePost}=_ref;const{buyerStatus,inspectionResult,shipping,paymentMethod,smartstoreProductId,inspectionDescription}=post;// ✅ 상태 분기\nconst canRequestDeposit=!buyerStatus||buyerStatus==='진행 전';const isWaitingForInspection=['입금확인','물품확인'].includes(buyerStatus)&&inspectionResult===null;const canDecisionOnInspection=buyerStatus==='물품확인'&&inspectionResult!==null;const canTrackShipping=buyerStatus==='출고'&&(shipping===null||shipping===void 0?void 0:shipping.courier)&&(shipping===null||shipping===void 0?void 0:shipping.tracking);const canFinalize=buyerStatus==='출고';// ✅ 현금 입금 처리\nconst handleDepositRequest=()=>{if(!paymentMethod){alert('결제 방식을 선택해주세요.');return;}updatePost({buyerStatus:'입금',paymentMethod:'cash'});};// ✅ 구매 / 취소 결정\nconst handlePurchaseConfirm=()=>updatePost({buyerStatus:'구매'});const handleCancelPurchase=()=>updatePost({buyerStatus:'취소'});// ✅ 거래 완료\nconst handleFinalize=()=>updatePost({buyerStatus:'완료'});// ✅ 배송 추적\nconst fetchTracking=()=>{const{courier,tracking}=shipping;const url=\"https://tracker.sweettracker.co.kr/?t_code=\".concat(courier,\"&t_invoice=\").concat(tracking);window.open(url,'_blank','width=80%,height=800');};return/*#__PURE__*/_jsxs(\"div\",{className:styles.actionBox,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83E\\uDDFE \\uAD6C\\uB9E4\\uC790\"}),canRequestDeposit&&/*#__PURE__*/_jsxs(_Fragment,{children:[paymentMethod==='cash'&&/*#__PURE__*/_jsxs(\"div\",{className:styles.notice,children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"img\",{src:imageLibrary.find(img=>img.id===2).src,alt:imageLibrary.find(img=>img.id===2).alt,className:styles.notiBank}),/*#__PURE__*/_jsx(\"span\",{onClick:()=>{navigator.clipboard.writeText(\"100041715312\");alert('📋 입금계좌가 복사되었습니다');},children:\" 1000-4171-5312\"}),\" \\uC774\\uD604\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{color:\"#d65c5cff\",marginLeft:\"16px\",marginBottom:\"5px\"},children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:\"12px\"},children:\"\\uD83D\\uDCCC\"}),\"\\uC785\\uAE08 \\uD6C4 \\\"\\uC785\\uAE08\\uC644\\uB8CC\\\"\\uB97C \\uAF2D \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694!\"]}),' ',/*#__PURE__*/_jsx(\"button\",{onClick:handleDepositRequest,className:styles.confirmBtn,children:\"\\uC785\\uAE08\\uC644\\uB8CC\"})]}),paymentMethod==='pay'&&smartstoreProductId&&/*#__PURE__*/_jsx(\"a\",{href:\"https://smartstore.naver.com/grinform/products/\".concat(smartstoreProductId),target:\"_blank\",rel:\"noopener noreferrer\",className:styles.confirmBtn,children:\"\\uACB0\\uC81C\\uD558\\uAE30\"})]}),isWaitingForInspection&&/*#__PURE__*/_jsx(\"div\",{className:styles.notice,children:\"\\u23F3 \\uAD00\\uB9AC\\uC790\\uAC00 \\uBB3C\\uD488\\uC744 \\uD655\\uC778 \\uC911\\uC785\\uB2C8\\uB2E4.\"}),canDecisionOnInspection&&/*#__PURE__*/_jsxs(\"div\",{className:styles.notice,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD0D \\uAD00\\uB9AC\\uC790 \\uAC80\\uC0AC \\uACB0\\uACFC: \",/*#__PURE__*/_jsx(\"strong\",{children:inspectionResult})]}),inspectionDescription&&/*#__PURE__*/_jsxs(\"p\",{className:styles.descriptionBox,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC124\\uBA85:\"}),\" \",inspectionDescription,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:styles.small_noti,children:\" \\u25A0 \\uD310\\uB9E4\\uC790\\uC640 \\uC5F0\\uB77D\\uC744 \\uAD8C\\uD569\\uB2C8\\uB2E4.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttonGroup,children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePurchaseConfirm,className:styles.confirmBtn,children:\"\\u2705 \\uAD6C\\uB9E4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelPurchase,className:styles.confirmBtn,children:\"\\u274C \\uCDE8\\uC18C\"})]})]}),canTrackShipping&&/*#__PURE__*/_jsx(\"div\",{className:styles.buttonGroup,children:/*#__PURE__*/_jsx(\"button\",{onClick:fetchTracking,children:\"\\uD83D\\uDD0D \\uBC30\\uC1A1 \\uCD94\\uC801\"})}),canFinalize&&/*#__PURE__*/_jsx(\"button\",{onClick:handleFinalize,className:styles.confirmBtn,children:\"\\uD83C\\uDF89 \\uBB3C\\uD488\\uC218\\uB839\"})]});}","map":{"version":3,"names":["useState","styles","imageLibrary","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BuyerActions","_ref","post","updatePost","buyerStatus","inspectionResult","shipping","paymentMethod","smartstoreProductId","inspectionDescription","canRequestDeposit","isWaitingForInspection","includes","canDecisionOnInspection","canTrackShipping","courier","tracking","canFinalize","handleDepositRequest","alert","handlePurchaseConfirm","handleCancelPurchase","handleFinalize","fetchTracking","url","concat","window","open","className","actionBox","children","notice","src","find","img","id","alt","notiBank","onClick","navigator","clipboard","writeText","style","color","marginLeft","marginBottom","fontSize","confirmBtn","href","target","rel","descriptionBox","small_noti","buttonGroup"],"sources":["D:/creative/react/hwaksee/client/src/components/BuyerActions.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport styles from '../css/Posts.module.css';\r\nimport imageLibrary from '../data/images';\r\n\r\nexport default function BuyerActions({ post, updatePost }) {\r\n  const { buyerStatus, inspectionResult, shipping, paymentMethod, smartstoreProductId, inspectionDescription } = post;\r\n\r\n  // ✅ 상태 분기\r\n  const canRequestDeposit = !buyerStatus || buyerStatus === '진행 전';\r\n  const isWaitingForInspection = ['입금확인', '물품확인'].includes(buyerStatus) && inspectionResult === null;\r\n  const canDecisionOnInspection = buyerStatus === '물품확인' && inspectionResult !== null;\r\n  const canTrackShipping = buyerStatus === '출고' && shipping?.courier && shipping?.tracking;\r\n  const canFinalize = buyerStatus === '출고';\r\n\r\n  // ✅ 현금 입금 처리\r\n  const handleDepositRequest = () => {\r\n    if (!paymentMethod) {\r\n      alert('결제 방식을 선택해주세요.');\r\n      return;\r\n    }\r\n    updatePost({ buyerStatus: '입금', paymentMethod: 'cash' });\r\n  };\r\n\r\n  // ✅ 구매 / 취소 결정\r\n  const handlePurchaseConfirm = () => updatePost({ buyerStatus: '구매' });\r\n  const handleCancelPurchase = () => updatePost({ buyerStatus: '취소' });\r\n\r\n  // ✅ 거래 완료\r\n  const handleFinalize = () => updatePost({ buyerStatus: '완료' });\r\n\r\n  // ✅ 배송 추적\r\n  const fetchTracking = () => {\r\n    const { courier, tracking } = shipping;\r\n    const url = `https://tracker.sweettracker.co.kr/?t_code=${courier}&t_invoice=${tracking}`;\r\n    window.open(url, '_blank', 'width=80%,height=800');\r\n  };\r\n\r\n  return (\r\n    <div className={styles.actionBox}>\r\n      <h4>🧾 구매자</h4>\r\n\r\n      {/* ✅ 결제 방식 선택 및 입금 요청 */}\r\n      {canRequestDeposit && (\r\n        <>\r\n          {paymentMethod === 'cash' && (\r\n            <div className={styles.notice}>\r\n              <p><img\r\n                  src={imageLibrary.find(img => img.id === 2).src}\r\n                  alt={imageLibrary.find(img => img.id === 2).alt}\r\n                  className={styles.notiBank}\r\n                />\r\n                <span onClick={() => {navigator.clipboard.writeText(\"100041715312\");alert('📋 입금계좌가 복사되었습니다');\r\n              }}> 1000-4171-5312</span> 이현\r\n              </p>\r\n              <p style={{ color: \"#d65c5cff\", marginLeft: \"16px\", marginBottom: \"5px\" }}><span style={{ fontSize: \"12px\" }}>📌</span>입금 후 \"입금완료\"를 꼭 눌러주세요!</p>{' '}\r\n              <button onClick={handleDepositRequest} className={styles.confirmBtn}>입금완료</button>\r\n            </div>\r\n          )}\r\n\r\n          {paymentMethod === 'pay' && smartstoreProductId && (\r\n            <a\r\n              href={`https://smartstore.naver.com/grinform/products/${smartstoreProductId}`}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className={styles.confirmBtn}\r\n            >\r\n              결제하기\r\n            </a>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* ✅ 검사 결과 대기 중 */}\r\n      {isWaitingForInspection && (\r\n        <div className={styles.notice}>\r\n          ⏳ 관리자가 물품을 확인 중입니다.\r\n        </div>\r\n      )}\r\n\r\n      {/* ✅ 검사 결과 기반 구매 결정 */}\r\n      {canDecisionOnInspection && (\r\n        <div className={styles.notice}>\r\n          <p>🔍 관리자 검사 결과: <strong>{inspectionResult}</strong></p>\r\n          {inspectionDescription && (\r\n            <p className={styles.descriptionBox}>\r\n              <strong>설명:</strong> {inspectionDescription} <br />\r\n              <span className={styles.small_noti}> ■ 판매자와 연락을 권합니다.</span>\r\n            </p>\r\n          )}\r\n          <div className={styles.buttonGroup}>\r\n            <button onClick={handlePurchaseConfirm} className={styles.confirmBtn}>✅ 구매</button>\r\n            <button onClick={handleCancelPurchase} className={styles.confirmBtn}>❌ 취소</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* ✅ 배송 추적 */}\r\n      {canTrackShipping && (\r\n        <div className={styles.buttonGroup}>\r\n          <button onClick={fetchTracking}>🔍 배송 추적</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* ✅ 거래 완료 */}\r\n      {canFinalize && (\r\n        <button onClick={handleFinalize} className={styles.confirmBtn}>\r\n          🎉 물품수령\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}