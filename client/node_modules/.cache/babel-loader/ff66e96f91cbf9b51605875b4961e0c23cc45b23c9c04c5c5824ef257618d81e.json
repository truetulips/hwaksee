{"ast":null,"code":"import{useState}from'react';import TrackingModal from'./TrackingModal';import styles from'../css/Posts.module.css';import imageLibrary from'../data/images';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function BuyerActions(_ref){let{post,updatePost}=_ref;const{buyerStatus,inspectionResult,shipping,paymentMethod,smartstoreProductId,inspectionDescription}=post;const[showTrackingModal,setShowTrackingModal]=useState(false);// 상태 분기\nconst canRequestDeposit=!buyerStatus||buyerStatus==='진행 전';const isWaitingForInspection=['입금확인','물품확인'].includes(buyerStatus)&&inspectionResult===null;const canDecisionOnInspection=buyerStatus==='물품확인'&&inspectionResult!==null;const canTrackShipping=buyerStatus==='출고'&&(shipping===null||shipping===void 0?void 0:shipping.courier)&&(shipping===null||shipping===void 0?void 0:shipping.tracking);const canFinalize=buyerStatus==='출고';// 액션 핸들러\nconst handleDepositRequest=()=>{if(!paymentMethod){alert('결제 방식을 선택해주세요.');return;}updatePost({buyerStatus:'입금',paymentMethod:'cash'});};const handlePurchaseConfirm=()=>updatePost({buyerStatus:'구매'});const handleCancelPurchase=()=>updatePost({buyerStatus:'취소'});const handleFinalize=()=>updatePost({buyerStatus:'완료'});return/*#__PURE__*/_jsxs(\"div\",{className:styles.actionBox,children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\uD83E\\uDDFE \\uAD6C\\uB9E4\\uC790\"}),canRequestDeposit&&/*#__PURE__*/_jsxs(_Fragment,{children:[paymentMethod==='cash'&&/*#__PURE__*/_jsxs(\"div\",{className:styles.notice,children:[/*#__PURE__*/_jsxs(\"p\",{onClick:()=>{var _navigator,_navigator$clipboard;if((_navigator=navigator)!==null&&_navigator!==void 0&&(_navigator$clipboard=_navigator.clipboard)!==null&&_navigator$clipboard!==void 0&&_navigator$clipboard.writeText){navigator.clipboard.writeText('100041715312').then(()=>alert('📋 입금계좌가 복사되었습니다')).catch(()=>alert('❌ 복사에 실패했습니다'));}else{alert('❌ 이 브라우저에서는 복사 기능을 지원하지 않습니다');}},children:[/*#__PURE__*/_jsx(\"img\",{src:imageLibrary.find(img=>img.id===2).src,alt:imageLibrary.find(img=>img.id===2).alt,className:styles.notiBank}),/*#__PURE__*/_jsx(\"span\",{children:\"1000-4171-5312\"}),\" \\uC774\\uD604\"]}),/*#__PURE__*/_jsxs(\"p\",{className:styles.small_noti,children:[/*#__PURE__*/_jsx(\"span\",{style:{fontSize:'12px'},children:\"\\uD83D\\uDCCC\"}),\" \\uC785\\uAE08 \\uD6C4 \\\"\\uC785\\uAE08\\uC644\\uB8CC\\\"\\uB97C \\uAF2D \\uB20C\\uB7EC\\uC8FC\\uC138\\uC694!\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleDepositRequest,className:styles.confirmBtn,children:\"\\uC785\\uAE08\\uC644\\uB8CC\"})]}),paymentMethod==='pay'&&smartstoreProductId&&/*#__PURE__*/_jsx(\"a\",{href:\"https://smartstore.naver.com/grinform/products/\".concat(smartstoreProductId),target:\"_blank\",rel:\"noopener noreferrer\",className:styles.confirmBtn,children:\"\\uACB0\\uC81C\\uD558\\uAE30\"})]}),isWaitingForInspection&&/*#__PURE__*/_jsx(\"div\",{className:styles.notice,children:\"\\u23F3 \\uAD00\\uB9AC\\uC790\\uAC00 \\uBB3C\\uD488\\uC744 \\uD655\\uC778 \\uC911\\uC785\\uB2C8\\uB2E4.\"}),canDecisionOnInspection&&/*#__PURE__*/_jsxs(\"div\",{className:styles.notice,children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\uD83D\\uDD0D \\uAD00\\uB9AC\\uC790 \\uAC80\\uC0AC \\uACB0\\uACFC: \",/*#__PURE__*/_jsx(\"strong\",{children:inspectionResult})]}),inspectionDescription&&/*#__PURE__*/_jsxs(\"p\",{className:styles.descriptionBox,children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\uC124\\uBA85:\"}),\" \",inspectionDescription,\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"span\",{className:styles.small_noti,children:\" \\u25A0 \\uD310\\uB9E4\\uC790\\uC640 \\uC5F0\\uB77D\\uC744 \\uAD8C\\uD569\\uB2C8\\uB2E4.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:styles.buttonGroup,children:[/*#__PURE__*/_jsx(\"button\",{onClick:handlePurchaseConfirm,className:styles.confirmBtn,children:\"\\u2705 \\uAD6C\\uB9E4\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCancelPurchase,className:styles.confirmBtn,children:\"\\u274C \\uCDE8\\uC18C\"})]})]}),canTrackShipping&&/*#__PURE__*/_jsx(\"div\",{className:styles.buttonGroup,children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowTrackingModal(true),children:\"\\uD83D\\uDD0D \\uBC30\\uC1A1 \\uCD94\\uC801\"})}),showTrackingModal&&/*#__PURE__*/_jsx(TrackingModal,{courier:shipping.courier,tracking:shipping.tracking,onClose:()=>setShowTrackingModal(false)}),canFinalize&&/*#__PURE__*/_jsx(\"button\",{onClick:handleFinalize,className:styles.confirmBtn,children:\"\\uD83C\\uDF89 \\uBB3C\\uD488\\uC218\\uB839\"})]});}","map":{"version":3,"names":["useState","TrackingModal","styles","imageLibrary","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BuyerActions","_ref","post","updatePost","buyerStatus","inspectionResult","shipping","paymentMethod","smartstoreProductId","inspectionDescription","showTrackingModal","setShowTrackingModal","canRequestDeposit","isWaitingForInspection","includes","canDecisionOnInspection","canTrackShipping","courier","tracking","canFinalize","handleDepositRequest","alert","handlePurchaseConfirm","handleCancelPurchase","handleFinalize","className","actionBox","children","notice","onClick","_navigator","_navigator$clipboard","navigator","clipboard","writeText","then","catch","src","find","img","id","alt","notiBank","small_noti","style","fontSize","confirmBtn","href","concat","target","rel","descriptionBox","buttonGroup","onClose"],"sources":["D:/creative/react/hwaksee/client/src/components/BuyerActions.jsx"],"sourcesContent":["import { useState } from 'react';\r\nimport TrackingModal from './TrackingModal';\r\nimport styles from '../css/Posts.module.css';\r\nimport imageLibrary from '../data/images';\r\n\r\nexport default function BuyerActions({ post, updatePost }) {\r\n  const {\r\n    buyerStatus,\r\n    inspectionResult,\r\n    shipping,\r\n    paymentMethod,\r\n    smartstoreProductId,\r\n    inspectionDescription,\r\n  } = post;\r\n\r\n  const [showTrackingModal, setShowTrackingModal] = useState(false);\r\n\r\n  // 상태 분기\r\n  const canRequestDeposit = !buyerStatus || buyerStatus === '진행 전';\r\n  const isWaitingForInspection =\r\n    ['입금확인', '물품확인'].includes(buyerStatus) && inspectionResult === null;\r\n  const canDecisionOnInspection =\r\n    buyerStatus === '물품확인' && inspectionResult !== null;\r\n  const canTrackShipping =\r\n    buyerStatus === '출고' && shipping?.courier && shipping?.tracking;\r\n  const canFinalize = buyerStatus === '출고';\r\n\r\n  // 액션 핸들러\r\n  const handleDepositRequest = () => {\r\n    if (!paymentMethod) {\r\n      alert('결제 방식을 선택해주세요.');\r\n      return;\r\n    }\r\n    updatePost({ buyerStatus: '입금', paymentMethod: 'cash' });\r\n  };\r\n\r\n  const handlePurchaseConfirm = () => updatePost({ buyerStatus: '구매' });\r\n  const handleCancelPurchase = () => updatePost({ buyerStatus: '취소' });\r\n  const handleFinalize = () => updatePost({ buyerStatus: '완료' });\r\n\r\n  return (\r\n    <div className={styles.actionBox}>\r\n      <h4>🧾 구매자</h4>\r\n\r\n      {/* 결제 방식 및 입금 요청 */}\r\n      {canRequestDeposit && (\r\n        <>\r\n          {paymentMethod === 'cash' && (\r\n            <div className={styles.notice}>\r\n              <p onClick={() => {\r\n                  if (navigator?.clipboard?.writeText) {\r\n                    navigator.clipboard.writeText('100041715312')\r\n                      .then(() => alert('📋 입금계좌가 복사되었습니다'))\r\n                      .catch(() => alert('❌ 복사에 실패했습니다'));\r\n                  } else {\r\n                    alert('❌ 이 브라우저에서는 복사 기능을 지원하지 않습니다');\r\n                  }\r\n                }}   \r\n              >\r\n                <img\r\n                  src={imageLibrary.find((img) => img.id === 2).src}\r\n                  alt={imageLibrary.find((img) => img.id === 2).alt}\r\n                  className={styles.notiBank}\r\n                />\r\n                <span>1000-4171-5312</span> 이현\r\n              </p>\r\n              <p className={styles.small_noti}>\r\n                <span style={{ fontSize: '12px' }}>📌</span> 입금 후 \"입금완료\"를 꼭 눌러주세요!\r\n              </p>\r\n              <button onClick={handleDepositRequest} className={styles.confirmBtn}>\r\n                입금완료\r\n              </button>\r\n            </div>\r\n          )}\r\n\r\n          {paymentMethod === 'pay' && smartstoreProductId && (\r\n            <a\r\n              href={`https://smartstore.naver.com/grinform/products/${smartstoreProductId}`}\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n              className={styles.confirmBtn}\r\n            >\r\n              결제하기\r\n            </a>\r\n          )}\r\n        </>\r\n      )}\r\n\r\n      {/* 검사 결과 대기 중 */}\r\n      {isWaitingForInspection && (\r\n        <div className={styles.notice}>⏳ 관리자가 물품을 확인 중입니다.</div>\r\n      )}\r\n\r\n      {/* 검사 결과 기반 구매 결정 */}\r\n      {canDecisionOnInspection && (\r\n        <div className={styles.notice}>\r\n          <p>🔍 관리자 검사 결과: <strong>{inspectionResult}</strong></p>\r\n          {inspectionDescription && (\r\n            <p className={styles.descriptionBox}>\r\n              <strong>설명:</strong> {inspectionDescription} <br />\r\n              <span className={styles.small_noti}> ■ 판매자와 연락을 권합니다.</span>\r\n            </p>\r\n          )}\r\n          <div className={styles.buttonGroup}>\r\n            <button onClick={handlePurchaseConfirm} className={styles.confirmBtn}>\r\n              ✅ 구매\r\n            </button>\r\n            <button onClick={handleCancelPurchase} className={styles.confirmBtn}>\r\n              ❌ 취소\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* 배송 추적 */}\r\n      {canTrackShipping && (\r\n        <div className={styles.buttonGroup}>\r\n          <button onClick={() => setShowTrackingModal(true)}>🔍 배송 추적</button>\r\n        </div>\r\n      )}\r\n\r\n      {/* 배송 추적 모달 */}\r\n      {showTrackingModal && (\r\n        <TrackingModal\r\n          courier={shipping.courier}\r\n          tracking={shipping.tracking}\r\n          onClose={() => setShowTrackingModal(false)}\r\n        />\r\n      )}\r\n\r\n      {/* 거래 완료 */}\r\n      {canFinalize && (\r\n        <button onClick={handleFinalize} className={styles.confirmBtn}>\r\n          🎉 물품수령\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}